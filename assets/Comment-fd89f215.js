import{u as V,E as $}from"./loading-1d1f8fe6.js";import{_ as H,T as z,r as m,q as A,o as F,a0 as j,a1 as x,a as q,Q as M,b as a,d as n,g as y,f as O,F as p,j as v,A as D,e as t,t as o,R as E,h as g,p as Q,l as G,O as J}from"./index-6bb17dc0.js";const K=d=>(Q("data-v-ab10e50d"),d=d(),G(),d),P={key:0,class:"comment-list"},R=K(()=>t("dt",{class:"comment-title"},"精彩评论",-1)),W=["href"],X={class:"comment-item-pic",alt:"userImg"},Y={class:"comment-item-title"},Z=["href"],ee={class:"comment-item-date"},te={class:"comment-item-disc"},se={class:"comment-item-opt"},oe={class:"comment-opt-liked"},ae=["href"],ne={key:1,class:"comment-list"},ce={class:"comment-title"},le=["href"],re={class:"comment-item-pic",alt:"userImg"},ie={class:"comment-item-title"},me=["href"],de={class:"comment-item-date"},ue={class:"comment-item-disc"},_e={class:"comment-item-opt"},he={class:"comment-opt-liked"},pe=["href"],ve={__name:"Comment",setup(d){const I=z(),{isLoading:C,hideLoad:B}=V(),f=m([]),r=m([]),u=m(0),L=m(null),k=m(!0),S=m(null);A(r,(s,c)=>{s.length!==c.length&&(k.value=!1)}),F(()=>{b(I.params.id)}),j(s=>{C.value=!0,u.value=0,S.value.scrollTop=0,b(s.params.id)});const b=async s=>{const c=await x(s,u.value);f.value=c.hotComments,r.value=c.comments,L.value=c.total,B()},w=s=>`${J(s.user.avatarUrl)}?param=50y50`,i=s=>`https://music.163.com/#/user/home?id=${s.user.userId}`,U=s=>s.ipLocation.location!=""?`${s.timeStr}  来自${s.ipLocation.location}`:s.timeStr,N=s=>{if(k.value)return;const{scrollTop:c,scrollHeight:_,offsetHeight:h}=s.target;c+h>=_-100&&(k.value=!0,T())},T=async()=>{u.value++;const s=await x(I.params.id,u.value);r.value=[...r.value,...s.comments]};return(s,c)=>{const _=q("ElectroIcon"),h=M("img-lazy");return a(),n("div",{class:"comment",onScroll:N,ref_key:"list",ref:S},[y($,{show:O(C)},null,8,["show"]),f.value.length>0?(a(),n("dl",P,[R,(a(!0),n(p,null,v(f.value,e=>(a(),n("dd",{key:e.commentId,class:"comment-item"},[t("a",{href:i(e),target:"_blank"},[E(t("img",X,null,512),[[h,w(e)]])],8,W),t("h4",Y,[t("a",{href:i(e),target:"_blank"},o(e.user.nickname),9,Z)]),t("div",ee,o(U(e)),1),t("p",te,o(e.content),1),t("div",se,[t("div",oe,[y(_,{class:"like-icon",type:"like"}),g(" "+o(e.likedCount),1)])]),(a(!0),n(p,null,v(e.beReplied,l=>(a(),n("div",{key:l.user.userId,class:"comment-item-replied"},[t("a",{href:i(l),target:"_blank"},o(l.user.nickname),9,ae),g(" ："+o(l.content),1)]))),128))]))),128))])):D("",!0),r.value.length>0?(a(),n("dl",ne,[t("dt",ce,"最新评论（"+o(L.value)+"）",1),(a(!0),n(p,null,v(r.value,e=>(a(),n("dd",{key:e.commentId,class:"comment-item"},[t("a",{href:i(e),target:"_blank"},[E(t("img",re,null,512),[[h,w(e)]])],8,le),t("h4",ie,[t("a",{href:i(e),target:"_blank"},o(e.user.nickname),9,me)]),t("div",de,o(U(e)),1),t("p",ue,o(e.content),1),t("div",_e,[t("div",he,[y(_,{class:"like-icon",type:"like"}),g(" "+o(e.likedCount),1)])]),(a(!0),n(p,null,v(e.beReplied,l=>(a(),n("div",{key:l.user.userId,class:"comment-item-replied"},[t("a",{href:i(e),target:"_blank"},o(l.user.nickname),9,pe),g(" ："+o(l.content),1)]))),128))]))),128))])):D("",!0)],544)}}},ke=H(ve,[["__scopeId","data-v-ab10e50d"]]);export{ke as default};
