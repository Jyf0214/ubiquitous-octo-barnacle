import{_ as U,u as V,r as l,o as M,b as n,d as u,g as _,f as T,e as h,F as b,j as B,R as D,V as E,W as I,X as K,Y as f,y as i,Z as g,$ as P,O as W,t as C}from"./index-6bb17dc0.js";import{M as F}from"./MusicList-7f15eddf.js";import{u as N,E as $}from"./loading-1d1f8fe6.js";import"./ElectroNoResult-c04ea358.js";const j={class:"search flex-col"},A={class:"search-head"},O=["onClick"],R=["onKeyup"],X={__name:"Search",setup(Y){const m=V(),{selectAddPlay:y}=m,t=l(""),d=l([]),o=l([]),c=l(0),{isLoading:r,hideLoad:L}=N(),S=async()=>{const e=await K();d.value=e.result.hots.slice(0,5)};M(()=>{S(),r.value=!1});const w=e=>{t.value=e,v()},p=l(null),v=async()=>{if(t.value=t.value.trim(),t.value==="clickHot"){i({message:"搜索内容不能为空~"});return}c.value=0,r.value=!0,o.value.length>0&&p.value.scrollToTop();const s=(await f(t.value)).result;o.value=g(s.songs),L()},k=async()=>{c.value++;const s=(await f(t.value,c.value)).result;if(!s.songs){i({message:"没有更多歌曲啦!"});return}o.value=[...o.value,...g(s.songs)]},x=async e=>{try{const a=(await P(e.id)).songs[0].al.picUrl;e.image=W(a),y(e)}catch{i({message:"哎呀，出错了~"})}};return(e,s)=>(n(),u("div",j,[_($,{show:T(r)},null,8,["show"]),h("div",A,[(n(!0),u(b,null,B(d.value,(a,H)=>(n(),u("span",{key:H,onClick:Z=>w(a.first)},C(a.first),9,O))),128)),D(h("input",{"onUpdate:modelValue":s[0]||(s[0]=a=>t.value=a),class:"search-input",type:"text",placeholder:"音乐/歌手",autofocus:"",onKeyup:I(v,["enter"])},null,40,R),[[E,t.value,void 0,{trim:!0}]])]),_(F,{ref_key:"musicList",ref:p,list:o.value,"list-type":"pullUp",onSelect:x,onPullUpLoad:k},null,8,["list"])]))}},Q=U(X,[["__scopeId","data-v-c37cf28b"]]);export{Q as default};
