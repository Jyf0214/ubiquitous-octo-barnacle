import{_ as H,u as M,r as l,o as T,b as n,d as u,g as _,f as V,e as h,F as b,j as B,O as D,T as E,U as I,V as P,W as f,v as i,X as g,Y as W,M as C,t as F}from"./index-7859e903.js";import{M as K}from"./MusicList-5fbb9776.js";import{u as N,E as j}from"./loading-8ac447e7.js";import"./ElectroNoResult-a95cede2.js";const A={class:"search flex-col"},O={class:"search-head"},X=["onClick"],Y={__name:"Search",setup($){const m=M(),{selectAddPlay:y}=m,t=l(""),d=l([]),o=l([]),r=l(0),{isLoading:c,hideLoad:L}=N(),S=async()=>{const e=await P();d.value=e.result.hots.slice(0,5)};T(()=>{S(),c.value=!1});const w=e=>{t.value=e,v()},p=l(null),v=async()=>{if(t.value=t.value.trim(),t.value==="clickHot"){i({message:"搜索内容不能为空~"});return}r.value=0,c.value=!0,o.value.length>0&&p.value.scrollToTop();const s=(await f(t.value)).result;o.value=g(s.songs),L()},k=async()=>{r.value++;const s=(await f(t.value,r.value)).result;if(!s.songs){i({message:"没有更多歌曲啦!"});return}o.value=[...o.value,...g(s.songs)]},x=async e=>{try{const a=(await W(e.id)).songs[0].al.picUrl;e.image=C(a),y(e)}catch{i({message:"哎呀，出错了~"})}};return(e,s)=>(n(),u("div",A,[_(j,{show:V(c)},null,8,["show"]),h("div",O,[(n(!0),u(b,null,B(d.value,(a,U)=>(n(),u("span",{key:U,onClick:q=>w(a.first)},F(a.first),9,X))),128)),D(h("input",{"onUpdate:modelValue":s[0]||(s[0]=a=>t.value=a),class:"search-input",type:"text",placeholder:"音乐/歌手",autofocus:"",onKeyup:I(v,["enter"])},null,544),[[E,t.value,void 0,{trim:!0}]])]),_(K,{ref_key:"musicList",ref:p,list:o.value,"list-type":"pullUp",onSelect:x,onPullUpLoad:k},null,8,["list"])]))}},R=H(Y,[["__scopeId","data-v-c37cf28b"]]);export{R as default};
