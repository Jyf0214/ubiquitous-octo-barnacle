import{b as a,d as u,L as T,k as C,i as f,a as Y,e as o,C as b,A as w,M as H,_ as A,v as B,s as F,x as U,r as y,o as W,q as V,N as R,O as q,Q as j,g as M,f as d,F as L,w as S,j as P,R as E,t as D,p as Z,l as K}from"./index-6bb17dc0.js";import{u as Q,E as G}from"./loading-1d1f8fe6.js";import{E as J}from"./ElectroNoResult-c04ea358.js";const N=(t,s)=>{const e=t.__vccOpts||t;for(const[r,i]of s)e[r]=i;return e},tt={name:"Slide",props:{index:{type:Number}},data(){return{parent:this.$parent,styles:{},zIndex:999}},computed:{isCurrent(){return this.index===this.parent.currentIndex},leftIndex(){return this.parent.oneDirectional&&this.getSideIndex(this.parent.leftIndices)>this.parent.currentIndex-1?-1:this.getSideIndex(this.parent.leftIndices)},rightIndex(){return this.parent.oneDirectional&&this.getSideIndex(this.parent.rightIndices)>this.parent.total-this.parent.currentIndex-2?-1:this.getSideIndex(this.parent.rightIndices)},slideStyle(){let t={};if(!this.isCurrent){const s=this.leftIndex,e=this.rightIndex;(e>=0||s>=0)&&(t=e>=0?this.calculatePosition(e,!0,this.zIndex):this.calculatePosition(s,!1,this.zIndex),t.opacity=1,t.visibility="visible"),this.parent.hasHiddenSlides&&(this.matchIndex(this.parent.leftOutIndex)?t=this.calculatePosition(this.parent.leftIndices.length-1,!1,this.zIndex):this.matchIndex(this.parent.rightOutIndex)&&(t=this.calculatePosition(this.parent.rightIndices.length-1,!0,this.zIndex)))}return Object.assign(t,{"border-width":this.parent.border+"px",width:this.parent.slideWidth+"px",height:this.parent.slideHeight+"px",transition:" transform "+this.parent.animationSpeed+"ms,                opacity "+this.parent.animationSpeed+"ms,                visibility "+this.parent.animationSpeed+"ms"})},computedClasses(){return{[`left-${this.leftIndex+1}`]:this.leftIndex>=0,[`right-${this.rightIndex+1}`]:this.rightIndex>=0,current:this.isCurrent}}},methods:{getSideIndex(t){let s=-1;return t.forEach((e,r)=>{this.matchIndex(e)&&(s=r)}),s},matchIndex(t){return t>=0?this.index===t:this.parent.total+t===this.index},calculatePosition(t,s,e){const r=this.parent.disable3d?0:parseInt(this.parent.inverseScaling)+(t+1)*100,i=this.parent.disable3d?0:parseInt(this.parent.perspective),n=this.parent.space==="auto"?parseInt((t+1)*(this.parent.width/1.5),10):parseInt((t+1)*this.parent.space,10),h=s?"translateX("+n+"px) translateZ(-"+r+"px) rotateY(-"+i+"deg)":"translateX(-"+n+"px) translateZ(-"+r+"px) rotateY("+i+"deg)",I=this.parent.space==="auto"?0:parseInt((t+1)*this.parent.space);return{transform:h,top:I,zIndex:e-(Math.abs(t)+1)}},goTo(){if(!this.isCurrent)this.parent.clickable===!0&&this.parent.goFar(this.index);else{const{index:t}=this;this.parent.onMainSlideClick({index:t})}}}};function et(t,s,e,r,i,n){return a(),u("div",{class:C(["carousel-3d-slide",n.computedClasses]),style:f(n.slideStyle),onClick:s[0]||(s[0]=h=>n.goTo())},[T(t.$slots,"default",{index:e.index,isCurrent:n.isCurrent,leftIndex:n.leftIndex,rightIndex:n.rightIndex})],6)}const z=N(tt,[["render",et]]),st={props:{autoplay:{type:Boolean,default:!1},autoplayTimeout:{type:Number,default:2e3},autoplayHoverPause:{type:Boolean,default:!0}},data(){return{autoplayInterval:null}},destroyed(){this.process_server||(this.pauseAutoplay(),this.$el.removeEventListener("mouseenter",this.pauseAutoplay),this.$el.removeEventListener("mouseleave",this.startAutoplay))},methods:{pauseAutoplay(){this.autoplayInterval&&(this.autoplayInterval=clearInterval(this.autoplayInterval))},startAutoplay(){this.autoplay&&(this.autoplayInterval=setInterval(()=>{this.dir==="ltr"?this.goPrev():this.goNext()},this.autoplayTimeout))}},mounted(){!this.process_server&&this.autoplayHoverPause&&(this.$el.addEventListener("mouseenter",this.pauseAutoplay),this.$el.addEventListener("mouseleave",this.startAutoplay),this.startAutoplay())}},it={name:"Controls",props:{width:{type:[String,Number],default:50},height:{type:[String,Number],default:60},prevHtml:{type:String,default:"&lsaquo;"},nextHtml:{type:String,default:"&rsaquo;"}},data(){return{parent:this.$parent}}},nt={class:"carousel-3d-controls"},rt=["innerHTML"],at=["innerHTML"];function ot(t,s,e,r,i,n){return a(),u("div",nt,[o("a",{href:"#",class:C(["prev",{disabled:!i.parent.isPrevPossible}]),onClick:s[0]||(s[0]=H(h=>i.parent.goPrev(),["prevent"])),style:f(`width: ${e.width}px; height: ${e.height}px; line-height: ${e.height}px;`),"aria-label":"Previous slide"},[o("span",{innerHTML:e.prevHtml},null,8,rt)],6),o("a",{href:"#",class:C(["next",{disabled:!i.parent.isNextPossible}]),onClick:s[1]||(s[1]=H(h=>i.parent.goNext(),["prevent"])),style:f(`width: ${e.width}px; height: ${e.height}px; line-height: ${e.height}px;`),"aria-label":"Next slide"},[o("span",{innerHTML:e.nextHtml},null,8,at)],6)])}const lt=N(it,[["render",ot],["__scopeId","data-v-475a7b20"]]),x=()=>{},ht={name:"Carousel3d",components:{Controls:lt},props:{count:{type:[Number,String],default:0},perspective:{type:[Number,String],default:35},display:{type:[Number,String],default:5},loop:{type:Boolean,default:!0},animationSpeed:{type:[Number,String],default:500},dir:{type:String,default:"rtl"},width:{type:[Number,String],default:360},height:{type:[Number,String],default:270},border:{type:[Number,String],default:1},space:{type:[Number,String],default:"auto"},startIndex:{type:[Number,String],default:0},clickable:{type:Boolean,default:!0},disable3d:{type:Boolean,default:!1},minSwipeDistance:{type:Number,default:10},inverseScaling:{type:[Number,String],default:300},controlsVisible:{type:Boolean,default:!1},controlsPrevHtml:{type:String,default:"&lsaquo;"},controlsNextHtml:{type:String,default:"&rsaquo;"},controlsWidth:{type:[String,Number],default:50},controlsHeight:{type:[String,Number],default:50},onLastSlide:{type:Function,default:x},onSlideChange:{type:Function,default:x},bias:{type:String,default:"left"},onMainSlideClick:{type:Function,default:x},oneDirectional:{type:Boolean,default:!1}},data(){return{viewport:0,currentIndex:0,total:0,dragOffsetX:0,dragStartX:0,dragOffsetY:0,dragStartY:0,mousedown:!1,zIndex:998,process_server:typeof window===void 0}},mixins:[st],watch:{count(){this.computeData()}},computed:{isLastSlide(){return this.currentIndex===this.total-1},isFirstSlide(){return this.currentIndex===0},isNextPossible(){return!(!this.loop&&this.isLastSlide)},isPrevPossible(){return!(!this.loop&&this.isFirstSlide)},slideWidth(){const t=this.viewport,s=parseInt(this.width)+parseInt(this.border,10)*2;return t<s&&!this.process_server?t:s},slideHeight(){const t=parseInt(this.width,10)+parseInt(this.border,10)*2,s=parseInt(parseInt(this.height)+this.border*2,10),e=this.calculateAspectRatio(t,s);return this.slideWidth/e},visible(){return this.display>this.total?this.total:this.display},hasHiddenSlides(){return this.total>this.visible},leftIndices(){let t=(this.visible-1)/2;t=this.bias.toLowerCase()==="left"?Math.ceil(t):Math.floor(t);const s=[];for(let e=1;e<=t;e++)s.push(this.dir==="ltr"?(this.currentIndex+e)%this.total:(this.currentIndex-e)%this.total);return s},rightIndices(){let t=(this.visible-1)/2;t=this.bias.toLowerCase()==="right"?Math.ceil(t):Math.floor(t);const s=[];for(let e=1;e<=t;e++)s.push(this.dir==="ltr"?(this.currentIndex-e)%this.total:(this.currentIndex+e)%this.total);return s},leftOutIndex(){let t=(this.visible-1)/2;return t=this.bias.toLowerCase()==="left"?Math.ceil(t):Math.floor(t),t++,this.dir==="ltr"?this.total-this.currentIndex-t<=0?-parseInt(this.total-this.currentIndex-t):this.currentIndex+t:this.currentIndex-t},rightOutIndex(){let t=(this.visible-1)/2;return t=this.bias.toLowerCase()==="right"?Math.ceil(t):Math.floor(t),t++,this.dir==="ltr"?this.currentIndex-t:this.total-this.currentIndex-t<=0?-parseInt(this.total-this.currentIndex-t,10):this.currentIndex+t}},methods:{goNext(){this.isNextPossible&&(this.isLastSlide?this.goSlide(0):this.goSlide(this.currentIndex+1))},goPrev(){this.isPrevPossible&&(this.isFirstSlide?this.goSlide(this.total-1):this.goSlide(this.currentIndex-1))},goSlide(t){this.currentIndex=t<0||t>this.total-1?0:t,this.isLastSlide&&(this.onLastSlide!==x&&console.warn("onLastSlide deprecated, please use @last-slide"),this.onLastSlide(this.currentIndex),this.$emit("last-slide",this.currentIndex)),this.$emit("before-slide-change",this.currentIndex),setTimeout(()=>this.animationEnd(),this.animationSpeed)},goFar(t){let s=t===this.total-1&&this.isFirstSlide?-1:t-this.currentIndex;this.isLastSlide&&t===0&&(s=1);const e=s<0?-s:s;let r=0,i=0;for(;i<e;)i+=1,setTimeout(()=>s<0?this.goPrev(e):this.goNext(e),e===1?0:r),r+=this.animationSpeed/e},animationEnd(){this.onSlideChange!==x&&console.warn("onSlideChange deprecated, please use @after-slide-change"),this.onSlideChange(this.currentIndex),this.$emit("after-slide-change",this.currentIndex)},handleMouseup(){this.mousedown=!1,this.dragOffsetX=0,this.dragOffsetY=0},handleMousedown(t){t.touches||t.preventDefault(),this.mousedown=!0,this.dragStartX="ontouchstart"in window?t.touches[0].clientX:t.clientX,this.dragStartY="ontouchstart"in window?t.touches[0].clientY:t.clientY},handleMousemove(t){if(!this.mousedown)return;const s="ontouchstart"in window?t.touches[0].clientX:t.clientX,e="ontouchstart"in window?t.touches[0].clientY:t.clientY,r=this.dragStartX-s,i=this.dragStartY-e;this.dragOffsetX=r,this.dragOffsetY=i,!(Math.abs(this.dragOffsetY)>Math.abs(this.dragOffsetX))&&(this.dragOffsetX>this.minSwipeDistance?(this.handleMouseup(),this.goNext()):this.dragOffsetX<-this.minSwipeDistance&&(this.handleMouseup(),this.goPrev()))},attachMutationObserver(){const t=window.MutationObserver||window.WebKitMutationObserver||window.MozMutationObserver;if(t){const s={attributes:!0,childList:!0,characterData:!0};this.mutationObserver=new t(()=>{this.$nextTick(()=>{this.computeData()})}),this.$el&&this.mutationObserver.observe(this.$el,s)}},detachMutationObserver(){this.mutationObserver&&this.mutationObserver.disconnect()},getSlideCount(){const t=this.$slots.default();return t.length>0?t[0].children.length:0},calculateAspectRatio(t,s){return Math.min(t/s)},computeData(t){this.total=this.getSlideCount(),(t||this.currentIndex>=this.total)&&(this.currentIndex=parseInt(this.startIndex)>this.total-1?this.total-1:parseInt(this.startIndex)),this.viewport=this.$el.clientWidth},setSize(){this.$el.style.cssText+="height:"+this.slideHeight+"px;",this.$el.childNodes[0].style.cssText+="width:"+this.slideWidth+"px; height:"+this.slideHeight+"px;"}},mounted(){this.process_server||(this.computeData(!0),this.attachMutationObserver(),window.addEventListener("resize",this.setSize),"ontouchstart"in window?(this.$el.addEventListener("touchstart",this.handleMousedown),this.$el.addEventListener("touchend",this.handleMouseup),this.$el.addEventListener("touchmove",this.handleMousemove)):(this.$el.addEventListener("mousedown",this.handleMousedown),this.$el.addEventListener("mouseup",this.handleMouseup),this.$el.addEventListener("mousemove",this.handleMousemove)))},beforeDestroy(){this.process_server||(this.detachMutationObserver(),"ontouchstart"in window?this.$el.removeEventListener("touchmove",this.handleMousemove):this.$el.removeEventListener("mousemove",this.handleMousemove),window.removeEventListener("resize",this.setSize))}};function dt(t,s,e,r,i,n){const h=Y("controls");return a(),u("div",{class:"carousel-3d-container",style:f({height:this.slideHeight+"px"})},[o("div",{class:"carousel-3d-slider",style:f({width:this.slideWidth+"px",height:this.slideHeight+"px"})},[T(t.$slots,"default",{},void 0,!0)],4),e.controlsVisible?(a(),b(h,{key:0,"next-html":e.controlsNextHtml,"prev-html":e.controlsPrevHtml,width:e.controlsWidth,height:e.controlsHeight},null,8,["next-html","prev-html","width","height"])):w("",!0)],4)}const X=N(ht,[["render",dt],["__scopeId","data-v-d1f6685d"]]);const _=t=>(Z("data-v-55b28021"),t=t(),K(),t),ut={class:"userlist"},ct={key:0,class:"user-create"},pt=_(()=>o("div",{class:"userlist-title"},"我创建的歌单",-1)),gt={alt:"image"},vt={class:"desc"},mt=_(()=>o("div",{class:"mask"},null,-1)),xt={key:1,class:"user-star"},ft=_(()=>o("div",{class:"userlist-title"},"我收藏的歌单",-1)),It={alt:"image"},yt={class:"desc"},St=_(()=>o("div",{class:"mask"},null,-1)),bt={__name:"UserList",setup(t){const s=B(),{uid:e}=F(s),r=U(),i=y([]),n=y([]),h=y(null),I=y(null),{isLoading:p,hideLoad:$}=Q();W(()=>{e.value?(p.value=!0,k()):$()}),V(e,g=>{g?(p.value=!0,k()):(i.value=[],n.value=[])});const k=async()=>{(await R(e.value)).playlist.forEach(l=>{l.coverImgUrl=q(l.coverImgUrl),l.creator.userId===Number(e.value)?i.value.push(l):n.value.push(l)}),$()},O=g=>{let c,l;g===0?(c=h.value.currentIndex,l=i.value[c].id):(c=I.value.currentIndex,l=n.value[c].id),r.push(`/music/details/${l}`)};return(g,c)=>{const l=j("img-lazy");return a(),u("div",ut,[M(G,{show:d(p)},null,8,["show"]),!d(p)&&d(e)?(a(),u(L,{key:0},[i.value.length>0?(a(),u("div",ct,[pt,M(d(X),{ref_key:"carousel",ref:h,count:i.value.length,width:120,height:120,display:5,controlsVisible:"true",space:100,clickable:!0,onMainSlideClick:()=>O(0)},{default:S(()=>[(a(!0),u(L,null,P(i.value,(v,m)=>(a(),b(d(z),{key:m,index:m},{default:S(()=>[E(o("img",gt,null,512),[[l,v.coverImgUrl]]),o("p",vt,"《"+D(v.name)+"》",1),mt]),_:2},1032,["index"]))),128))]),_:1},8,["count","onMainSlideClick"])])):w("",!0),n.value.length>0?(a(),u("div",xt,[ft,M(d(X),{ref_key:"carouselStar",ref:I,count:n.value.length,width:120,height:120,display:5,controlsVisible:"true",space:100,clickable:!0,onMainSlideClick:()=>O(1)},{default:S(()=>[(a(!0),u(L,null,P(n.value,(v,m)=>(a(),b(d(z),{key:m,index:m},{default:S(()=>[E(o("img",It,null,512),[[l,v.coverImgUrl]]),o("p",yt,"《"+D(v.name)+"》",1),St]),_:2},1032,["index"]))),128))]),_:1},8,["count","onMainSlideClick"])])):w("",!0)],64)):!d(p)&&!d(e)?(a(),b(J,{key:1,title:"空空如也，快去登录看看吧~"})):w("",!0)])}}},Lt=A(bt,[["__scopeId","data-v-55b28021"]]);export{Lt as default};
